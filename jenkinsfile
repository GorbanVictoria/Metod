pipeline {
agent any
environment {
DB_URL = 'mysql+pymysql://usr:pwd@host:<port>/db'
DISABLE_AUTH = true
GOOGLE_ACCESS_KEY_ID = credentials('google-access-key-id')
}
stages {
stage(«Сборка») {
steps {
echo «Сборка приложения...»
sh '''
echo «Этот блок содержит многострочные шаги»
ls -lh
'''
sh '''
echo «URL базы данных: ${DB_URL}»
echo «DISABLE_AUTH: ${DISABLE_AUTH}»
env
'''
echo «Запуск задачи с номером сборки: ${env.BUILD_NUMBER} на ${env.JENKINS_URL}»
}
}
stage(«Тестирование») {
steps {
echo «Тестирование приложения...»
}
}
stage(«Деплой на стейджинг») {
steps {
echo «Проверка наличия команд»
sh 'which chmod || echo «chmod not found»'
